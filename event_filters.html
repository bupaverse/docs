<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>bupaR Docs | Filter events</title>

<script src="site_libs/header-attrs-2.20/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
<link href="site_libs/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-5.2.2/bootstrap.bundle.min.js"></script>
<script src="site_libs/bs3compat-0.4.2/transition.js"></script>
<script src="site_libs/bs3compat-0.4.2/tabs.js"></script>
<script src="site_libs/bs3compat-0.4.2/bs3compat.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/htmlwidgets-1.6.1/htmlwidgets.js"></script>
<script src="site_libs/viz-1.8.2/viz.js"></script>
<link href="site_libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet" />
<script src="site_libs/grViz-binding-1.0.9/grViz.js"></script>
<script>
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-92605173-2', 'auto');
ga('send', 'pageview');

</script>
<!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script>
<link rel="shortcut icon" href="images/logo/favicon.PNG" />
<style>
  .title{
    display: none;
  }
</style>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>



<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #c4a000; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #000000; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #000000; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #000000; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>







<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
#TOC {
  display: none !important;
}
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}

.tocify-subheader {
  display: inline;
}
.tocify-subheader .tocify-item {
  font-size: 0.95em;
}

</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html"><a href = 'https://bupar.net'><img id = "logo" style = "width: 200px; padding: 0px 20px 0px 0px" src = "images/logo/bupar_trans_witteR2.png" /></a></a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="install.html">Install</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Create
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="create_logs.html">Create Logs</a>
    </li>
    <li>
      <a href="adjust_logs.html">Adjust Logs</a>
    </li>
    <li>
      <a href="public_logs.html">Public Logs</a>
    </li>
    <li>
      <a href="xes_files.html">XES-files</a>
    </li>
    <li>
      <a href="inspect_logs.html">Inspect logs</a>
    </li>
    <li>
      <a href="data_quality.html">Data Quality</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Manipulate
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="manipulate.html">Overview</a>
    </li>
    <li class="divider"></li>
    <li>
      <a href="wrangling.html">Wrangling</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">Filter</li>
    <li>
      <a href="case_filters.html">by case</a>
    </li>
    <li>
      <a href="event_filters.html">by event</a>
    </li>
    <li>
      <a href="generic_filtering.html">generic</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">Enrich</li>
    <li>
      <a href="augment.html">augment</a>
    </li>
    <li>
      <a href="mutate.html">mutate</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">Aggregate</li>
    <li>
      <a href="collapse.html">collapse</a>
    </li>
    <li>
      <a href="unite.html">unite</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Analyze
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="analyze.html">Overview</a>
    </li>
    <li class="divider"></li>
    <li>
      <a href="control_flow_analysis.html">Control-flow</a>
    </li>
    <li>
      <a href="performance_analysis.html">Performance</a>
    </li>
    <li>
      <a href="organisational_analysis.html">Organisational</a>
    </li>
    <li>
      <a href="multi_dimensional_analysis.html">Multi-dimensional</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Visualize
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="visualize.html">Overview</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">Process maps</li>
    <li>
      <a href="frequency_maps.html">Frequency</a>
    </li>
    <li>
      <a href="performance_maps.html">Performance</a>
    </li>
    <li>
      <a href="advanced_maps.html">Advanced</a>
    </li>
    <li>
      <a href="animate_maps.html">Animate</a>
    </li>
    <li class="divider"></li>
    <li>
      <a href="process_matrix.html">Process Matrix</a>
    </li>
    <li>
      <a href="dotted_chart.html">Dotted chart</a>
    </li>
    <li>
      <a href="trace_explorer.html">Trace explorer</a>
    </li>
    <li>
      <a href="performance_spectrum.html">Performance spectrum</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Predict
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="predict_workflow.html">Workflow</a>
    </li>
    <li>
      <a href="predict_adapt.html">Adapting your model</a>
    </li>
    <li>
      <a href="predict_keras.html">Customization with keras</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="faq.html">FAQ</a>
</li>
<li>
  <a href="developer_guide.html">Developer guide</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Package guide
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="https://bupaverse.github.io/bupaR/">bupaR</a>
    </li>
    <li>
      <a href="https://bupaverse.github.io/bupaverse/">bupaverse</a>
    </li>
    <li>
      <a href="https://bupaverse.github.io/daqapo">daqapo</a>
    </li>
    <li>
      <a href="https://bupaverse.github.io/edeaR/">edeaR</a>
    </li>
    <li>
      <a href="https://bupaverse.github.io/eventdataR/">eventdataR</a>
    </li>
    <li>
      <a href="https://bupaverse.github.io/heuristicsmineR/">heuristicsmineR</a>
    </li>
    <li>
      <a href="https://bupaverse.github.io/pm4py/">pm4py</a>
    </li>
    <li>
      <a href="https://bupaverse.github.io/processanimateR/">processanimateR</a>
    </li>
    <li>
      <a href="https://bupaverse.github.io/processcheckR/">processcheckR</a>
    </li>
    <li>
      <a href="https://bupaverse.github.io/processmapR/">processmapR</a>
    </li>
    <li>
      <a href="https://bupaverse.github.io/xesreadR">xesreadR</a>
    </li>
  </ul>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">bupaR Docs | Filter events</h1>

</div>


<p><img src="images/icons/filter.png" width="25%" style="display: block; margin: auto 0 auto auto;" /></p>
<hr />
<div id="event-filters" class="section level1">
<h1>Event filters</h1>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(bupaR)</span></code></pre></div>
<div id="activity" class="section level2">
<h2>Activity</h2>
<p>The filter activity function can be used to filter activities by
name. It has three arguments</p>
<ul>
<li>the event log</li>
<li>a vector of activities</li>
<li>the reverse argument (FALSE or TRUE)</li>
</ul>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>patients <span class="sc">%&gt;%</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter_activity</span>(<span class="fu">c</span>(<span class="st">&quot;X-Ray&quot;</span>, <span class="st">&quot;Blood test&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    activities</span></code></pre></div>
<pre><code>## # A tibble: 2 × 3
##   handling   absolute_frequency relative_frequency
##   &lt;fct&gt;                   &lt;int&gt;              &lt;dbl&gt;
## 1 X-Ray                     261              0.524
## 2 Blood test                237              0.476</code></pre>
<p>As one can see, there are only 2 distinct activities left in the
event log.</p>
</div>
<div id="activity-frequency" class="section level2">
<h2>Activity Frequency</h2>
<div id="relative-filtering---using-percentage" class="section level4">
<h4>Relative filtering - using percentage</h4>
<p>It is also possible to filter on activity frequency. This filter uses
a percentile cut off, and will look at those activities which are most
frequent until the required percentage of events has been reached. Thus,
a percentile cut off of 80% will look at the activities needed to
represent 80% of the events. In the example below, the
<strong>least</strong> frequent activities covering 50% of the event log
are selected, since the reverse argument is true.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>patients <span class="sc">%&gt;%</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter_activity_frequency</span>(<span class="at">percentage =</span> <span class="fl">0.5</span>, <span class="at">reverse =</span> T) <span class="sc">%&gt;%</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>    activities</span></code></pre></div>
<pre><code>## # A tibble: 4 × 3
##   handling   absolute_frequency relative_frequency
##   &lt;fct&gt;                   &lt;int&gt;              &lt;dbl&gt;
## 1 Check-out                 492              0.401
## 2 X-Ray                     261              0.213
## 3 Blood test                237              0.193
## 4 MRI SCAN                  236              0.192</code></pre>
</div>
<div id="absolute-filtering---using-interval" class="section level4">
<h4>Absolute filtering - using interval</h4>
<p>Instead of providing a target percentage, we can provide a target
frequency interval. For example, only retain the activities which occur
more than 300 times.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>patients <span class="sc">%&gt;%</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter_activity_frequency</span>(<span class="at">interval =</span> <span class="fu">c</span>(<span class="dv">300</span>,<span class="dv">500</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>    activities</span></code></pre></div>
<pre><code>## # A tibble: 4 × 3
##   handling              absolute_frequency relative_frequency
##   &lt;fct&gt;                              &lt;int&gt;              &lt;dbl&gt;
## 1 Registration                         500              0.252
## 2 Triage and Assessment                500              0.252
## 3 Discuss Results                      495              0.249
## 4 Check-out                            492              0.248</code></pre>
<p>When we don’t now the maximal frequency - 500 in this case, we can
use an open interval by using NA.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>patients <span class="sc">%&gt;%</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter_activity_frequency</span>(<span class="at">interval =</span> <span class="fu">c</span>(<span class="dv">300</span>, <span class="cn">NA</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>    activities</span></code></pre></div>
<pre><code>## # A tibble: 4 × 3
##   handling              absolute_frequency relative_frequency
##   &lt;fct&gt;                              &lt;int&gt;              &lt;dbl&gt;
## 1 Registration                         500              0.252
## 2 Triage and Assessment                500              0.252
## 3 Discuss Results                      495              0.249
## 4 Check-out                            492              0.248</code></pre>
</div>
</div>
<div id="activity-instance" class="section level2">
<h2>Activity Instance</h2>
</div>
<div id="lifecycle" class="section level2">
<h2>Lifecycle</h2>
</div>
<div id="lifecycle-presence" class="section level2">
<h2>Lifecycle Presence</h2>
</div>
<div id="resource-labels" class="section level2">
<h2>Resource Labels</h2>
<p>Similar to the activity filter, the resource filter can be used to
filter events by listing on or more resources.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>patients <span class="sc">%&gt;%</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter_resource</span>(<span class="fu">c</span>(<span class="st">&quot;r1&quot;</span>,<span class="st">&quot;r4&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">resource_frequency</span>(<span class="st">&quot;resource&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 2 × 3
##   employee absolute relative
##   &lt;fct&gt;       &lt;int&gt;    &lt;dbl&gt;
## 1 r1            500    0.679
## 2 r4            236    0.321</code></pre>
</div>
<div id="resource-frequency" class="section level2">
<h2>Resource Frequency</h2>
<p>Instead of filtering events by the resource that performed the
activity, we can also filter event by the frequency of the resource.
This happens in the same way as for the activity frequency filter. The
filter below gives us the 80% activity instances performed by the most
common resources.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>patients <span class="sc">%&gt;%</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter_resource_frequency</span>(<span class="at">perc =</span> <span class="fl">0.80</span>) <span class="sc">%&gt;%</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">resources</span>()</span></code></pre></div>
<pre><code>## # A tibble: 5 × 3
##   employee absolute_frequency relative_frequency
##   &lt;fct&gt;                 &lt;int&gt;              &lt;dbl&gt;
## 1 r1                      500              0.222
## 2 r2                      500              0.222
## 3 r6                      495              0.220
## 4 r7                      492              0.219
## 5 r5                      261              0.116</code></pre>
<p>Alternatively, using the interval argument, we can select resources
who perform between 200 and 300 activity instances.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>patients <span class="sc">%&gt;%</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter_resource_frequency</span>(<span class="at">interval =</span> <span class="fu">c</span>(<span class="dv">200</span>,<span class="dv">300</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">resources</span>()</span></code></pre></div>
<pre><code>## # A tibble: 3 × 3
##   employee absolute_frequency relative_frequency
##   &lt;fct&gt;                 &lt;int&gt;              &lt;dbl&gt;
## 1 r5                      261              0.356
## 2 r3                      237              0.323
## 3 r4                      236              0.322</code></pre>
</div>
<div id="trim-to-endpoints" class="section level2">
<h2>Trim to Endpoints</h2>
<p>The trim filter is a special event filter, as it also take into
account the notion of cases. In fact, it <em>trim</em> cases such that
they start with a certain activities until they end with a certain
activity. It requires two list: one for possible start activities and
one for end activities. The cases will be trimmed from the first
appearance of a start activity till the last appearance of an end
activity. When reversed, these <em>slices</em> of the event log will be
removed instead of preserved.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>patients <span class="sc">%&gt;%</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter_trim</span>(<span class="at">start_activities =</span> <span class="st">&quot;Registration&quot;</span>, <span class="at">end_activities =</span>  <span class="fu">c</span>(<span class="st">&quot;MRI SCAN&quot;</span>,<span class="st">&quot;X-Ray&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">process_map</span>(<span class="at">type =</span> <span class="fu">performance</span>())</span></code></pre></div>
<div class="grViz html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-7089c9ef2115dda3b1e2" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-7089c9ef2115dda3b1e2">{"x":{"diagram":"digraph {\n\ngraph [layout = \"dot\",\n       outputorder = \"edgesfirst\",\n       bgcolor = \"white\",\n       rankdir = \"LR\"]\n\nnode [fontname = \"Helvetica\",\n      fontsize = \"10\",\n      shape = \"circle\",\n      fixedsize = \"true\",\n      width = \"0.5\",\n      style = \"filled\",\n      fillcolor = \"aliceblue\",\n      color = \"gray70\",\n      fontcolor = \"gray50\"]\n\nedge [fontname = \"Helvetica\",\n     fontsize = \"8\",\n     weight = \"1.5\",\n     color = \"gray80\",\n     arrowsize = \"0.5\"]\n\n  \"1\" [label = \"End\", shape = \"circle\", style = \"rounded,filled\", fontcolor = \"brown4\", color = \"brown4\", tooltip = \"ARTIFICIAL_END\n0 mins\", penwidth = \"1.5\", fixedsize = \"FALSE\", fontname = \"Arial\", fontsize = \"10\", fillcolor = \"#FFFFFF\"] \n  \"2\" [label = \"Start\", shape = \"circle\", style = \"rounded,filled\", fontcolor = \"chartreuse4\", color = \"chartreuse4\", tooltip = \"ARTIFICIAL_START\n0 mins\", penwidth = \"1.5\", fixedsize = \"FALSE\", fontname = \"Arial\", fontsize = \"10\", fillcolor = \"#FFFFFF\"] \n  \"3\" [label = \"Blood test\n332.06 mins\", shape = \"rectangle\", style = \"rounded,filled\", fontcolor = \"black\", color = \"grey\", tooltip = \"Blood test\n332.06 mins\", penwidth = \"1.5\", fixedsize = \"FALSE\", fontname = \"Arial\", fontsize = \"10\", fillcolor = \"#FCBBA1\"] \n  \"4\" [label = \"MRI SCAN\n248.99 mins\", shape = \"rectangle\", style = \"rounded,filled\", fontcolor = \"black\", color = \"grey\", tooltip = \"MRI SCAN\n248.99 mins\", penwidth = \"1.5\", fixedsize = \"FALSE\", fontname = \"Arial\", fontsize = \"10\", fillcolor = \"#FEE0D2\"] \n  \"5\" [label = \"Registration\n165.55 mins\", shape = \"rectangle\", style = \"rounded,filled\", fontcolor = \"black\", color = \"grey\", tooltip = \"Registration\n165.55 mins\", penwidth = \"1.5\", fixedsize = \"FALSE\", fontname = \"Arial\", fontsize = \"10\", fillcolor = \"#FFF5F0\"] \n  \"6\" [label = \"Triage and Assessment\n786.79 mins\", shape = \"rectangle\", style = \"rounded,filled\", fontcolor = \"white\", color = \"grey\", tooltip = \"Triage and Assessment\n786.79 mins\", penwidth = \"1.5\", fixedsize = \"FALSE\", fontname = \"Arial\", fontsize = \"10\", fillcolor = \"#99000D\"] \n  \"7\" [label = \"X-Ray\n290.76 mins\", shape = \"rectangle\", style = \"rounded,filled\", fontcolor = \"black\", color = \"grey\", tooltip = \"X-Ray\n290.76 mins\", penwidth = \"1.5\", fixedsize = \"FALSE\", fontname = \"Arial\", fontsize = \"10\", fillcolor = \"#FCBBA1\"] \n\"2\"->\"5\" [label = \" \", penwidth = \"1\", color = \"red4\", fontname = \"Arial\", fontsize = \"10\", weight = \"1\", constraint = \"TRUE\"] \n\"3\"->\"4\" [label = \"1524.19 mins\", penwidth = \"2.92128602061254\", color = \"red4\", fontname = \"Arial\", fontsize = \"10\", weight = \"1\", constraint = \"TRUE\"] \n\"4\"->\"1\" [label = \" \", penwidth = \"1\", color = \"red4\", fontname = \"Arial\", fontsize = \"10\", weight = \"1\", constraint = \"TRUE\"] \n\"5\"->\"6\" [label = \"756.21 mins\", penwidth = \"1.95322283903858\", color = \"red4\", fontname = \"Arial\", fontsize = \"10\", weight = \"1\", constraint = \"TRUE\"] \n\"6\"->\"3\" [label = \"3040.61 mins\", penwidth = \"4.8327727871476\", color = \"red4\", fontname = \"Arial\", fontsize = \"10\", weight = \"1\", constraint = \"TRUE\"] \n\"6\"->\"7\" [label = \"3173.28 mins\", penwidth = \"5\", color = \"red4\", fontname = \"Arial\", fontsize = \"10\", weight = \"1\", constraint = \"TRUE\"] \n\"7\"->\"1\" [label = \" \", penwidth = \"1\", color = \"red4\", fontname = \"Arial\", fontsize = \"10\", weight = \"1\", constraint = \"TRUE\"] \n}","config":{"engine":"dot","options":null}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="trim-to-time-window" class="section level2">
<h2>Trim to Time Window</h2>
<p>Instead of triming cases to a particular start and/or end activity,
we can also trim cases to a particular time window. For this we use the
function <code>filter_time_period</code> with filter_method
<code>trim</code>. This filter needs a time interval, which is a vector
of length 2 containing data/datetime values. These can be created easily
using <a href="https://lubridate.tidyverse.org/">lubridate</a> function,
e.g. <code>ymd</code> for year-month-day formats.</p>
<p>This example takes only activity instances which happened (at least
partly, i.e. some events) in December of 2017.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>patients <span class="sc">%&gt;%</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter_time_period</span>(<span class="at">interval =</span> <span class="fu">ymd</span>(<span class="fu">c</span>(<span class="dv">20171201</span>, <span class="dv">20171231</span>)), <span class="at">filter_method =</span> <span class="st">&quot;trim&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summary</span>()</span></code></pre></div>
<pre><code>## Number of events:  290
## Number of cases:  36
## Number of traces:  13
## Number of distinct activities:  7
## Average trace length:  8.055556
## 
## Start eventlog:  2017-11-30 20:29:12
## End eventlog:  2017-12-31 08:00:08</code></pre>
<pre><code>##                   handling    patient          employee handling_id       
##  Blood test           :30   Length:290         r1:52    Length:290        
##  Check-out            :48   Class :character   r2:52    Class :character  
##  Discuss Results      :54   Mode  :character   r3:30    Mode  :character  
##  MRI SCAN             :30                      r4:30                      
##  Registration         :52                      r5:24                      
##  Triage and Assessment:52                      r6:54                      
##  X-Ray                :24                      r7:48                      
##  registration_type      time                            .order      
##  complete:145      Min.   :2017-11-30 20:29:12.00   Min.   :  1.00  
##  start   :145      1st Qu.:2017-12-06 01:04:43.25   1st Qu.: 73.25  
##                    Median :2017-12-13 13:12:47.00   Median :145.50  
##                    Mean   :2017-12-13 20:14:51.00   Mean   :145.50  
##                    3rd Qu.:2017-12-19 18:09:13.50   3rd Qu.:217.75  
##                    Max.   :2017-12-31 08:00:08.00   Max.   :290.00  
## </code></pre>
<p>Using a different filter method (start, complete, contained or
intersecting), this filter can also act as a case filter (see
below).</p>
<hr />
<p>Read more:</p>
<div class="btn-toolbar" role="group">
<p><a style = 'margin: 5px' href = "wrangling.html" class="btn btn-info" type="button">Wrangling</a>
<a style = 'margin: 5px' href = "case_filters.html" class="btn btn-info" type="button">Case
Filters</a>
<a style = 'margin: 5px' href = "event_filters.html" class="btn btn-info disabled" type="button">Event
Filters</a>
<a style = 'margin: 5px' href = "generic_filtering.html" class="btn btn-info" type="button">Generic
Filtering</a>
<a style = 'margin: 5px' href = "augment.html" class="btn btn-info" type="button">Augment</a>
<a style = 'margin: 5px' href = "mutate.html" class="btn btn-info" type="button">Mutate</a>
<a style = 'margin: 5px' href = "collapse.html" class="btn btn-info" type="button">Collapse</a>
<a style = 'margin: 5px' href = "unite.html" class="btn btn-info" type="button">Unite</a></p>
</div>
</div>
</div>

<hr>
<center><p style = "font-size: 12px">Copyright &copy; 2023 <a href = "https://bupar.net/about/" >bupaR - Hasselt University</a></p></center>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3,h4",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = false;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
