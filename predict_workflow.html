<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Introduction to processpredictR: a basic workflow</title>

<script src="site_libs/header-attrs-2.19/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
<link href="site_libs/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-5.2.2/bootstrap.bundle.min.js"></script>
<script src="site_libs/bs3compat-0.4.2/transition.js"></script>
<script src="site_libs/bs3compat-0.4.2/tabs.js"></script>
<script src="site_libs/bs3compat-0.4.2/bs3compat.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script>
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-92605173-2', 'auto');
ga('send', 'pageview');

</script>
<link rel="shortcut icon" href="images/logo/favicon.PNG" />
<style>
  .title{
    display: none;
  }
</style>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>



<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #c4a000; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #000000; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #000000; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #000000; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>







<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
#TOC {
  display: none !important;
}
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}

.tocify-subheader {
  display: inline;
}
.tocify-subheader .tocify-item {
  font-size: 0.95em;
}

</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html"><a href = 'https://bupar.net'><img id = "logo" style = "width: 200px; padding: 0px 20px 0px 0px" src = "images/logo/bupar_trans_witteR2.png" /></a></a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="install.html">Install</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Create
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="create_logs.html">Create Logs</a>
    </li>
    <li>
      <a href="adjust_logs.html">Adjust Logs</a>
    </li>
    <li>
      <a href="public_logs.html">Public Logs</a>
    </li>
    <li>
      <a href="xes_files.html">XES-files</a>
    </li>
    <li>
      <a href="metadata.html">Inspect logs</a>
    </li>
    <li>
      <a href="data_quality.html">Data Quality</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Manipulate
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="manipulate.html">Overview</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">Filter</li>
    <li>
      <a href="case_filters.html">by case</a>
    </li>
    <li>
      <a href="event_filters.html">by event</a>
    </li>
    <li>
      <a href="generic_filtering.html">generic</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">Enrich</li>
    <li>
      <a href="augment.html">augment</a>
    </li>
    <li>
      <a href="mutate.html">mutate</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">Aggregate</li>
    <li>
      <a href="collapse.html">collapse</a>
    </li>
    <li>
      <a href="unite.html">unite</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Analyze
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="analyze.html">Overview</a>
    </li>
    <li class="divider"></li>
    <li>
      <a href="control_flow_analysis.html">Control-flow</a>
    </li>
    <li>
      <a href="performance_analysis.html">Performance</a>
    </li>
    <li>
      <a href="organisational_analysis.html">Organisational</a>
    </li>
    <li>
      <a href="multi_dimensional_analysis.html">Multi-dimensional</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Visualize
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="visualize.html">Overview</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">Process maps</li>
    <li>
      <a href="frequency_maps.html">Frequency</a>
    </li>
    <li>
      <a href="performance_maps.html">Performance</a>
    </li>
    <li>
      <a href="advanced_maps.html">Advanced</a>
    </li>
    <li>
      <a href="animate_maps.html">Animate</a>
    </li>
    <li class="divider"></li>
    <li>
      <a href="process_matrix.html">Process Matrix</a>
    </li>
    <li>
      <a href="dotted_chart.html">Dotted chart</a>
    </li>
    <li>
      <a href="trace_exporer.html">Trace explorer</a>
    </li>
    <li>
      <a href="performance_spectrum.html">Performance spectrum</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Predict
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="predict_workflow.html">Workflow</a>
    </li>
    <li>
      <a href="predict_adapt.html">Adapting your model</a>
    </li>
    <li>
      <a href="predict_keras.html">Customization with keras</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="faq.html">FAQ</a>
</li>
<li>
  <a href="developer_guide.html">Developer guide</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Package guide
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="https://bupaverse.github.io/bupaR/">bupaR</a>
    </li>
    <li>
      <a href="https://bupaverse.github.io/bupaverse/">bupaverse</a>
    </li>
    <li>
      <a href="https://bupaverse.github.io/daqapo">daqapo</a>
    </li>
    <li>
      <a href="https://bupaverse.github.io/edeaR/">edeaR</a>
    </li>
    <li>
      <a href="https://bupaverse.github.io/eventdataR/">eventdataR</a>
    </li>
    <li>
      <a href="https://bupaverse.github.io/heuristicsmineR/">heuristicsmineR</a>
    </li>
    <li>
      <a href="https://bupaverse.github.io/pm4py/">pm4py</a>
    </li>
    <li>
      <a href="https://bupaverse.github.io/processanimateR/">processanimateR</a>
    </li>
    <li>
      <a href="https://bupaverse.github.io/processcheckR/">processcheckR</a>
    </li>
    <li>
      <a href="https://bupaverse.github.io/processmapR/">processmapR</a>
    </li>
    <li>
      <a href="https://bupaverse.github.io/xesreadR">xesreadR</a>
    </li>
  </ul>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Introduction to processpredictR: a basic
workflow</h1>

</div>


<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(processpredictR)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(bupaR)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(keras)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(purrr)</span></code></pre></div>
<div id="introduction" class="section level1">
<h1>Introduction</h1>
<p>The goal of <code>processpredictR</code> is to perform prediction
tasks on processes using event logs and Transformer models. The 5
process monitoring tasks are defined as follows:</p>
<ul>
<li><strong>outcome</strong>: predict the case outcome, which can be the
last activity, or a manually defined variable</li>
<li><strong>next activity</strong>: predict the next activity
instance</li>
<li><strong>remaining trace</strong>: predict the sequence of all next
activity instances</li>
<li><strong>next time</strong>: predict the start time of the next
activity instance</li>
<li><strong>remaining time</strong>: predict the remaining time till the
end of the case</li>
</ul>
<p>The overall approach using <code>processpredictR</code> is shown in
the Figure below. <code>prepare_examples()</code> transforms logs into a
dataset that can be used for training and prediction, which is
thereafter split into train and test set. Subsequently a model is made,
compiled and fit. Finally, the model can be used to predict and can be
evaluated</p>
<p><img src="images/framework.PNG" width="60%" style="display: block; margin: auto;" /></p>
<p>Different levels of customization are offered. Using
<code>create_model()</code>, a standard off-the-shelf model can be
created for each of the supported tasks, including standard
features.</p>
<p>A first customization is to include additional features, such as case
or event attributes. These can be configured in the
<code>prepare_examples()</code> step, and they will be processed
automatically (normalized for numerical features, or hot-encoded for
categorical features).</p>
<p>A further way to customize your model, is to only generate the input
layer of the model with <code>create_model()</code>, and define the
remainder of the model yourself by adding <code>keras</code> layers
using the provided <code>stack_layers()</code> function.</p>
<p>Going beyond that, you can also create the model entirely yourself
using <code>keras</code>, including the preprocessing of the data.
Auxiliary functions are provided to help you with, e.g., tokenizing
activity sequences.</p>
<p>In the remainder of this tutorial, each of the steps and possible
avenues for customization will be described in more detail.</p>
</div>
<div id="preprocessing" class="section level1">
<h1>Preprocessing</h1>
<p>As a first step in the process prediction workflow we use
<code>prepare_examples()</code> to obtain a dataset, where:</p>
<ul>
<li>each row/observation is a unique activity instance id</li>
<li>the prefix(_list) column stores the sequence of activities already
executed in the case</li>
<li>necessary features and target variables are calculated and/or
added</li>
</ul>
<p>The returned object is of class <code>ppred_examples_df</code>, which
inherits from <code>tbl_df</code>.</p>
<p>In this tutorial we will use the <code>traffic_fines</code> event log
from <code>eventdataR</code>. Note that both <code>eventlog</code> and
<code>activitylog</code> objects, as defined by <code>bupaR</code> are
supported.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">prepare_examples</span>(traffic_fines, <span class="at">task =</span> <span class="st">&quot;outcome&quot;</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>df</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 27,001 × 11</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    ith_case case_id prefix                 prefi…¹ outcome     k activ…² resou…³</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;       &lt;int&gt; &lt;chr&gt;   &lt;chr&gt;                  &lt;list&gt;  &lt;fct&gt;   &lt;dbl&gt; &lt;chr&gt;   &lt;fct&gt;  </span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1        1 A2127   Create Fine            &lt;chr&gt;   Payment     0 Create… 537    </span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2        1 A2127   Create Fine - Payment  &lt;chr&gt;   Payment     1 Payment &lt;NA&gt;   </span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3        2 A15     Create Fine            &lt;chr&gt;   Send f…     0 Create… 561    </span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4        2 A15     Create Fine - Send Fi… &lt;chr&gt;   Send f…     1 Send F… &lt;NA&gt;   </span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5        2 A15     Create Fine - Send Fi… &lt;chr&gt;   Send f…     2 Insert… &lt;NA&gt;   </span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6        2 A15     Create Fine - Send Fi… &lt;chr&gt;   Send f…     3 Add pe… &lt;NA&gt;   </span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7        2 A15     Create Fine - Send Fi… &lt;chr&gt;   Send f…     4 Send f… &lt;NA&gt;   </span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8        3 A1820   Create Fine            &lt;chr&gt;   Payment     0 Create… 563    </span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9        3 A1820   Create Fine - Payment  &lt;chr&gt;   Payment     1 Payment &lt;NA&gt;   </span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10        4 A1451   Create Fine            &lt;chr&gt;   Send f…     0 Create… 560    </span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # … with 26,991 more rows, 3 more variables: start_time &lt;dttm&gt;,</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   end_time &lt;dttm&gt;, remaining_trace_list &lt;list&gt;, and abbreviated variable</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   names ¹​prefix_list, ²​activity, ³​resource</span></span></code></pre></div>
<p>We split the transformed dataset <code>df</code> into train- and test
sets for later use in <code>fit()</code> and <code>predict()</code>,
respectively. The proportion of the train set is configured with the
<code>split</code> argument.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>split <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> <span class="fu">split_train_test</span>(<span class="at">split =</span> <span class="fl">0.8</span>)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>split<span class="sc">$</span>train_df <span class="sc">%&gt;%</span> <span class="fu">head</span>(<span class="dv">5</span>)</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 5 × 11</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   ith_case case_id prefix                  prefi…¹ outcome     k activ…² resou…³</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;      &lt;int&gt; &lt;chr&gt;   &lt;chr&gt;                   &lt;list&gt;  &lt;fct&gt;   &lt;dbl&gt; &lt;chr&gt;   &lt;fct&gt;  </span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1        1 A2127   Create Fine             &lt;chr&gt;   Payment     0 Create… 537    </span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2        1 A2127   Create Fine - Payment   &lt;chr&gt;   Payment     1 Payment &lt;NA&gt;   </span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3        2 A15     Create Fine             &lt;chr&gt;   Send f…     0 Create… 561    </span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4        2 A15     Create Fine - Send Fine &lt;chr&gt;   Send f…     1 Send F… &lt;NA&gt;   </span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5        2 A15     Create Fine - Send Fin… &lt;chr&gt;   Send f…     2 Insert… &lt;NA&gt;   </span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # … with 3 more variables: start_time &lt;dttm&gt;, end_time &lt;dttm&gt;,</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   remaining_trace_list &lt;list&gt;, and abbreviated variable names ¹​prefix_list,</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   ²​activity, ³​resource</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>split<span class="sc">$</span>test_df <span class="sc">%&gt;%</span> <span class="fu">head</span>(<span class="dv">5</span>)</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 5 × 11</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   ith_case case_id prefix                  prefi…¹ outcome     k activ…² resou…³</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;      &lt;int&gt; &lt;chr&gt;   &lt;chr&gt;                   &lt;list&gt;  &lt;fct&gt;   &lt;dbl&gt; &lt;chr&gt;   &lt;fct&gt;  </span></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1     6873 A23409  Create Fine             &lt;chr&gt;   Payment     0 Create… 557    </span></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2     6873 A23409  Create Fine - Payment   &lt;chr&gt;   Payment     1 Payment &lt;NA&gt;   </span></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3     6874 A23410  Create Fine             &lt;chr&gt;   Send f…     0 Create… 557    </span></span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4     6874 A23410  Create Fine - Send Fine &lt;chr&gt;   Send f…     1 Send F… &lt;NA&gt;   </span></span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5     6874 A23410  Create Fine - Send Fin… &lt;chr&gt;   Send f…     2 Insert… &lt;NA&gt;   </span></span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # … with 3 more variables: start_time &lt;dttm&gt;, end_time &lt;dttm&gt;,</span></span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   remaining_trace_list &lt;list&gt;, and abbreviated variable names ¹​prefix_list,</span></span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   ²​activity, ³​resource</span></span></code></pre></div>
<p>It’s important to note that the split is done at case level (a case
is fully part of either the train data or either the test data).
Furthermore, the split is done chronologically, meaning that the train
set contains the split% first cases, and the test set contains the
(1-split)% last cases.</p>
<p>Note that because the split is done at case level, the percentage of
all examples in the train set can be slightly different, as cases differ
with respect their length.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(split<span class="sc">$</span>train_df) <span class="sc">/</span> <span class="fu">nrow</span>(df)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 0.8032295</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="fu">n_distinct</span>(split<span class="sc">$</span>train_df<span class="sc">$</span>case_id) <span class="sc">/</span> <span class="fu">n_distinct</span>(df<span class="sc">$</span>case_id)</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 0.7999069</span></span></code></pre></div>
</div>
<div id="transformer-model" class="section level1">
<h1>Transformer model</h1>
<p>The next step in the workflow is to build a model.
<code>processpredictR</code> provides a default set of functions that
are wrappers of generics provided by <code>keras</code>. For ease of
use, the preprocessing steps, such as tokenizing of sequences,
normalizing numerical features, etc. happen within the
<code>create_model()</code> function and are abstracted from the
user.</p>
<div id="define-model" class="section level2">
<h2>Define model</h2>
<p>Based on the train set we define the default transformer model, using
<code>create_model()</code>.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>model <span class="ot">&lt;-</span> split<span class="sc">$</span>train_df <span class="sc">%&gt;%</span> <span class="fu">create_model</span>(<span class="at">name =</span> <span class="st">&quot;my_model&quot;</span>) </span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="co"># pass arguments as ... that are applicable to keras::keras_model()</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>model <span class="co"># is a list </span></span></code></pre></div>
<pre><code>#&gt; Model: &quot;my_model&quot;
#&gt; ________________________________________________________________________________
#&gt;  Layer (type)                       Output Shape                    Param #     
#&gt; ================================================================================
#&gt;  input_1 (InputLayer)               [(None, 9)]                     0           
#&gt;  token_and_position_embedding (Toke  (None, 9, 36)                  792         
#&gt;  nAndPositionEmbedding)                                                         
#&gt;  transformer_block (TransformerBloc  (None, 9, 36)                  26056       
#&gt;  k)                                                                             
#&gt;  global_average_pooling1d (GlobalAv  (None, 36)                     0           
#&gt;  eragePooling1D)                                                                
#&gt;  dropout_3 (Dropout)                (None, 36)                      0           
#&gt;  dense_3 (Dense)                    (None, 64)                      2368        
#&gt;  dropout_2 (Dropout)                (None, 64)                      0           
#&gt;  dense_2 (Dense)                    (None, 6)                       390         
#&gt; ================================================================================
#&gt; Total params: 29,606
#&gt; Trainable params: 29,606
#&gt; Non-trainable params: 0
#&gt; ________________________________________________________________________________</code></pre>
<p>Some useful information and metrics are stored for a tracebility and
an easy extraction if needed.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>model <span class="sc">%&gt;%</span> <span class="fu">names</span>() <span class="co"># objects from a returned list</span></span></code></pre></div>
<pre><code>#&gt; $names
#&gt; [1] &quot;model&quot;           &quot;max_case_length&quot; &quot;number_features&quot; &quot;task&quot;           
#&gt; [5] &quot;num_outputs&quot;     &quot;vocabulary&quot;     
</code></pre>
<p>Note that <code>create_model()</code> returns a list, in which the
actual keras model is stored under the element name <code>model</code>.
Thus, we can use functions from the keras-package as follows:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>model<span class="sc">$</span>model<span class="sc">$</span>name <span class="co"># get the name of a model</span></span></code></pre></div>
<pre><code>#&gt; [1] &quot;my_model&quot;
</code></pre>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>model<span class="sc">$</span>model<span class="sc">$</span>non_trainable_variables <span class="co"># list of non-trainable parameters of a model</span></span></code></pre></div>
<pre><code>#&gt; list()</code></pre>
<p>The result of <code>create_model()</code> is assigned it’s own class
(<code>ppred_model</code>) for which the <code>processpredictR</code>
provides the methods <em>compile()</em>, <em>fit()</em>,
<em>predict()</em> and <em>evaluate()</em>.</p>
</div>
<div id="compilation" class="section level2">
<h2>Compilation</h2>
<p>The following step is to compile the model. By default, the loss
function is the log-cosh or the categorical cross entropy, for
regression tasks (next time and remaining time) and classification
tasks, respectively. It is of course possible to override the
defaults.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>model <span class="sc">%&gt;%</span> <span class="fu">compile</span>() <span class="co"># model compilation</span></span></code></pre></div>
<pre><code>#&gt; Compilation complete!</code></pre>
</div>
<div id="training" class="section level2">
<h2>Training</h2>
<p>Training of the model is done with the <code>fit()</code> function.
During training, a visualization window will open in the Viewer-pane to
show the progress in terms of loss. Optionally, the result of
<code>fit()</code> can be assigned to an object to access the training
metrics specified in <em>compile()</em>.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>hist <span class="ot">&lt;-</span> <span class="fu">fit</span>(<span class="at">object =</span> model, <span class="at">train_data =</span> split<span class="sc">$</span>train_df, <span class="at">epochs =</span> <span class="dv">5</span>)</span></code></pre></div>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>hist<span class="sc">$</span>params</span></code></pre></div>
<pre><code>#&gt; $verbose
#&gt; [1] 1
#&gt; 
#&gt; $epochs
#&gt; [1] 5
#&gt; 
#&gt; $steps
#&gt; [1] 2227</code></pre>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>hist<span class="sc">$</span>metrics</span></code></pre></div>
<pre><code>#&gt; $loss
#&gt; [1] 0.7875332 0.7410239 0.7388409 0.7385073 0.7363014
#&gt; 
#&gt; $sparse_categorical_accuracy
#&gt; [1] 0.6539739 0.6713067 0.6730579 0.6735967 0.6747193
#&gt; 
#&gt; $val_loss
#&gt; [1] 0.7307042 0.7261314 0.7407018 0.7326428 0.7317348
#&gt; 
#&gt; $val_sparse_categorical_accuracy
#&gt; [1] 0.6725934 0.6727730 0.6725934 0.6725934 0.6722342</code></pre>
</div>
<div id="make-predictions" class="section level2">
<h2>Make predictions</h2>
<p>The method <em>predict()</em> can return 3 types of output, by
setting the argument <code>output</code> to “append”, “y_pred” or
“raw”.</p>
<p>Test dataset with appended predicted values (output = “append”):</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># make predictions on the test set</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>predictions <span class="ot">&lt;-</span> model <span class="sc">%&gt;%</span> <span class="fu">predict</span>(<span class="at">test_data =</span> split<span class="sc">$</span>test_df, </span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>                                 <span class="at">output =</span> <span class="st">&quot;append&quot;</span>) <span class="co"># default</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>predictions <span class="sc">%&gt;%</span> <span class="fu">head</span>(<span class="dv">5</span>)</span></code></pre></div>
<pre><code>#&gt; # A tibble: 5 × 13
#&gt;   ith_case case_id prefix                prefix_…¹ outcome     k activ…² resou…³
#&gt;      &lt;int&gt; &lt;chr&gt;   &lt;chr&gt;                 &lt;list&gt;    &lt;fct&gt;   &lt;dbl&gt; &lt;chr&gt;   &lt;fct&gt;  
#&gt; 1     8001 A24869  Create Fine           &lt;chr [1]&gt; Payment     0 Create… 559    
#&gt; 2     8001 A24869  Create Fine - Payment &lt;chr [2]&gt; Payment     1 Payment &lt;NA&gt;   
#&gt; 3     8002 A24871  Create Fine           &lt;chr [1]&gt; Payment     0 Create… 559    
#&gt; 4     8002 A24871  Create Fine - Payment &lt;chr [2]&gt; Payment     1 Payment &lt;NA&gt;   
#&gt; 5     8003 A24872  Create Fine           &lt;chr [1]&gt; Send f…     0 Create… 559    
#&gt; # … with 5 more variables: start_time &lt;dttm&gt;, end_time &lt;dttm&gt;,
#&gt; #   remaining_trace_list &lt;list&gt;, y_pred &lt;dbl&gt;, pred_outcome &lt;chr&gt;, and
#&gt; #   abbreviated variable names ¹​prefix_list, ²​activity, ³​resource</code></pre>
<details>
<summary>
raw predicted values (output = “raw”)
</summary>
<p>
<pre><code>#&gt;              Payment Send for Credit Collection    Send Fine
#&gt;    [1,] 4.966056e-01                0.344094276 1.423686e-01
#&gt;    [2,] 9.984029e-01                0.001501600 8.890528e-05
#&gt;    [3,] 4.966056e-01                0.344094276 1.423686e-01
#&gt;    [4,] 9.984029e-01                0.001501600 8.890528e-05
#&gt;    [5,] 4.966056e-01                0.344094276 1.423686e-01
#&gt;    [6,] 1.556145e-01                0.518976271 2.884890e-01
#&gt;    [7,] 2.345311e-01                0.715000629 5.147375e-06
#&gt;    [8,] 2.627363e-01                0.726804197 5.480492e-06
#&gt;    [9,] 3.347774e-05                0.999961376 2.501280e-08
#&gt;   [10,] 4.966056e-01                0.344094276 1.423686e-01</code></pre>
</details>
</p>
<details>
<summary>
predicted values with postprocessing (output = “y_pred”)
</summary>
<pre><code>#&gt;    [1] &quot;Payment&quot;                    &quot;Payment&quot;                   
#&gt;    [3] &quot;Payment&quot;                    &quot;Payment&quot;                   
#&gt;    [5] &quot;Payment&quot;                    &quot;Send for Credit Collection&quot;
#&gt;    [7] &quot;Send for Credit Collection&quot; &quot;Send for Credit Collection&quot;
#&gt;    [9] &quot;Send for Credit Collection&quot; &quot;Payment&quot;                   
#&gt;   [11] &quot;Send for Credit Collection&quot; &quot;Payment&quot;                   
#&gt;   [13] &quot;Send for Credit Collection&quot; &quot;Payment&quot;                   
#&gt;   [15] &quot;Send for Credit Collection&quot; &quot;Send for Credit Collection&quot;
#&gt;   [17] &quot;Send for Credit Collection&quot; &quot;Send for Credit Collection&quot;
#&gt;   [19] &quot;Payment&quot;                    &quot;Send for Credit Collection&quot;</code></pre>
</details>
</p>
<div id="visualize-predictions" class="section level3">
<h3>Visualize predictions</h3>
<p>For the classification tasks outcome and next activity a
<code>confusion_matrix()</code> function is provided.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>predictions <span class="sc">%&gt;%</span> class</span></code></pre></div>
<pre><code>#&gt; [1] &quot;ppred_predictions&quot; &quot;ppred_examples_df&quot; &quot;ppred_examples_df&quot;
#&gt; [4] &quot;ppred_examples_df&quot; &quot;tbl_df&quot;            &quot;tbl&quot;              
#&gt; [7] &quot;data.frame&quot;</code></pre>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># print confusion matrix</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="fu">confusion_matrix</span>(predictions)</span></code></pre></div>
<pre><code>#&gt;                                   
#&gt;                                    Payment Send Appeal to Prefecture
#&gt;   Appeal to Judge                        2                         6
#&gt;   Notify Result Appeal to Offender       0                         0
#&gt;   Payment                             1903                         7
#&gt;   Send Appeal to Prefecture             34                        90
#&gt;   Send Fine                            387                         0
#&gt;   Send for Credit Collection           688                        22
#&gt;                                   
#&gt;                                    Send for Credit Collection
#&gt;   Appeal to Judge                                          10
#&gt;   Notify Result Appeal to Offender                          0
#&gt;   Payment                                                 617
#&gt;   Send Appeal to Prefecture                                89
#&gt;   Send Fine                                               387
#&gt;   Send for Credit Collection                             2644</code></pre>
<p>Plot method for the confusion matrix (classification) or a scatter
plot (regression).</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># plot confusion matrix in a bupaR style</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(predictions) <span class="sc">+</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>))</span></code></pre></div>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(<span class="st">&quot;images/confusion_matrix.PNG&quot;</span>)</span></code></pre></div>
</div>
</div>
<div id="evaluate-model" class="section level2">
<h2>Evaluate model</h2>
<p>Returns loss and metrics specified in <em>compile()</em>.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>model <span class="sc">%&gt;%</span> <span class="fu">evaluate</span>(split<span class="sc">$</span>test_df)</span></code></pre></div>
<pre><code>#&gt;                        loss sparse_categorical_accuracy 
#&gt;                   0.7779053                   0.6716526</code></pre>
</div>
</div>

<hr>
<center><p style = "font-size: 12px">Copyright &copy; 2023 <a href = "https://bupar.net/about/" >bupaR - Hasselt University</a></p></center>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3,h4",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = false;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
